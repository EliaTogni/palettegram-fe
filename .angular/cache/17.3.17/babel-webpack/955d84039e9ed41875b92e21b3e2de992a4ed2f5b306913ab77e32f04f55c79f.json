{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction AppComponent_div_4_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_4_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.applyTransformation());\n    });\n    i0.ɵɵtext(1, \" Applica trasformazione \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_div_4_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_4_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.downloadImage());\n    });\n    i0.ɵɵtext(1, \" Scarica immagine \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"img\", 6);\n    i0.ɵɵelementStart(2, \"div\", 7);\n    i0.ɵɵtemplate(3, AppComponent_div_4_button_3_Template, 2, 0, \"button\", 8)(4, AppComponent_div_4_button_4_Template, 2, 0, \"button\", 9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r1.transformedImage ? ctx_r1.transformedImage : ctx_r1.originalImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.transformedImage);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.transformedImage);\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    http;\n    originalImage = null; // immagine utente da visualizzare\n    originalFile = null; // file per l’invio al BE\n    transformedImage = null; // immagine trasformata da mostrare\n    transformedBlob = null; // blob per il download\n    constructor(http) {\n      this.http = http;\n    }\n    onFileSelected(event) {\n      const input = event.target;\n      if (input.files && input.files.length > 0) {\n        this.originalFile = input.files[0];\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.originalImage = reader.result;\n          this.transformedImage = null; // reset immagine trasformata\n          this.transformedBlob = null; // reset blob\n        };\n        reader.readAsDataURL(this.originalFile);\n      }\n    }\n    applyTransformation() {\n      if (!this.originalFile) return;\n      const formData = new FormData();\n      formData.append('file', this.originalFile);\n      this.http.post('http://localhost:8080/image/upload', formData, {\n        responseType: 'blob'\n      }).subscribe(blob => {\n        this.transformedBlob = blob;\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.transformedImage = reader.result;\n        };\n        reader.readAsDataURL(blob);\n      });\n    }\n    downloadImage() {\n      if (!this.transformedBlob) return;\n      const url = URL.createObjectURL(this.transformedBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'processed-image.png';\n      a.click();\n      URL.revokeObjectURL(url);\n    }\n    static ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      decls: 5,\n      vars: 1,\n      consts: [[1, \"container\"], [\"for\", \"fileInput\", 1, \"camera-icon\"], [1, \"fas\", \"fa-camera\"], [\"id\", \"fileInput\", \"type\", \"file\", \"accept\", \"image/*\", \"hidden\", \"\", 3, \"change\"], [\"class\", \"result\", 4, \"ngIf\"], [1, \"result\"], [\"alt\", \"Image\", 3, \"src\"], [1, \"button-container\"], [\"class\", \"transform-btn\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"download-btn\", 3, \"click\", 4, \"ngIf\"], [1, \"transform-btn\", 3, \"click\"], [1, \"download-btn\", 3, \"click\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"label\", 1);\n          i0.ɵɵelement(2, \"i\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"input\", 3);\n          i0.ɵɵlistener(\"change\", function AppComponent_Template_input_change_3_listener($event) {\n            return ctx.onFileSelected($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, AppComponent_div_4_Template, 5, 3, \"div\", 4);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.originalImage);\n        }\n      },\n      dependencies: [i2.NgIf],\n      styles: [\".button-container[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;justify-content:center;gap:1rem}.transform-btn[_ngcontent-%COMP%], .download-btn[_ngcontent-%COMP%]{padding:.6rem 1.4rem;font-size:1rem;border-radius:6px;border:none;cursor:pointer;color:#fff;transition:background-color .3s ease}.transform-btn[_ngcontent-%COMP%]{background-color:#28a745}.transform-btn[_ngcontent-%COMP%]:hover{background-color:#1e7e34}.download-btn[_ngcontent-%COMP%]{background-color:#007bff}.download-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}\"]\n    });\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}